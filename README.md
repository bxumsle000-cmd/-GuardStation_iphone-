# GuardStation iPhone 價格監控系統

- 這是一個用於監控保衛站（GuardStation）二手 iPhone 商品資料的自動化爬蟲系統，支援全站爬取和增量更新兩種模式。
- 此計畫實際爬取時間從2026年1月開始

## 功能特色

- **全站爬取**：完整爬取所有 iPhone 系列（SE、8、X、11-17）的商品資料
- **增量更新**：只更新有變動的商品，大幅縮短執行時間（從 1.5 小時降至 2-3 分鐘）
- **資料標準化**：自動處理機型、外觀、保固等欄位的格式統一
- **資料庫儲存**：使用 SQLite 資料庫儲存歷史資料
- **視覺化分析**：整合 Tableau 儀表板進行價格趨勢與庫存分析



## 系統需求

### Python 套件

安裝 [Miniconda](https://www.anaconda.com/docs/getting-started/miniconda/main)
依據 `environment.yml` 建立環境：
``` bash
conda env create -f environment.yml
```
## 使用方法

### 1. 全站爬取（GS_iphone_search_all.py）

第一次使用或需要完整重建資料庫時執行：

```bash
python GS_iphone_search_all.py
```

**執行時間**：約 1.5-2 小時

**輸出檔案**：
- `Iphone.db`（資料庫）
- `guardstation_iphone.csv.csv`（CSV 備份）

### 2. 增量更新（GS_iphone_update.ipynb）

日常監控時使用，只更新有變動的商品：

```bash
jupyter notebook GS_iphone_update.ipynb
```

**執行時間**：約 2-3 分鐘

**更新內容**：
- 新上架商品
- 已下架商品
- 價格或規格有變動的商品

## 資料表結構

### GS_iphone 表

| 欄位名稱 | 說明 | 範例 |
|---------|------|------|
| 編號 | 商品編號 | A12345 |
| 機型 | iPhone 型號 | 15 Pro Max |
| 容量 | 儲存容量 | 256GB |
| 顏色 | 機身顏色 | 黑色 |
| 保固 | 保固到期日 | 2026/07/08 |
| 保固_類型 | 保固類型 | 店保/原廠保固/no warranty |
| 外觀 | 外觀等級 | 優/好/普通 |
| 功能 | 功能狀態 | 正常 |
| 分店位置 | 所在店面 | 西門店 |
| 價格 | 實際售價 | 25000 |
| 優惠價格 | 促銷價格 | 24000 |
| 原價格 | 原始標價 | 26000 |
| 系列 | iPhone 系列 | 15 |
| 狀態 | 上架/下架 | 上架中 |
| 抓取月份 | 新商品上架的月份 | 2026-01 |

## 資料處理功能

### 1. 機型標準化
自動將各種寫法統一為標準格式：
- `iPhone 15 Pro Max` → `15 Pro Max`
- `iphone 15pro max` → `15 Pro Max`

### 2. 外觀等級分類
- 優（包含所有「優」的變體）
- 好（原「正常」）
- 普通

### 3. 保固處理
- **店保**：三個月店面保固 → `three month`
- **原廠保固**：民國年轉西元年 → `2026/07/08`
- **無保固**：`no warranty`

### 4. 系列分類
自動依機型判斷所屬系列（se, 8, x, 11-17）

## 資料庫備份

   - 建議定期備份 `Iphone.db` 檔案
   - 全站爬取會使用 `replace` 模式覆蓋舊資料


## Tableau 互動式儀表板

### 🔗 [查看即時儀表板](https://public.tableau.com/app/profile/.76517965/viz/GuardStation_iphone/1?publish=yes)

透過 Tableau 視覺化儀表板，你可以：

### 主要功能
- **價格分布分析**：依機型、容量、外觀等級查看價格區間
- **庫存數量統計**：各系列、各店面的庫存狀況一目了然
- **保固類型比較**：原廠保固 vs 店保 vs 無保固的數量與價格差異
- **系列趨勢觀察**：不同 iPhone 系列的價格帶分布
- **互動式篩選**：可自由選擇機型、容量、外觀等級進行客製化查詢

### 使用建議
1. **買家視角**：篩選想要的機型和預算，快速找到最佳選擇
2. **賣家視角**：了解市場行情，制定合理定價策略

3. **市場研究**：分析不同系列、容量的供需狀況


